(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{37:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t.n(r),u=t(14),i=t.n(u),o=t(3),d=function(e){var n=e.filterString,t=e.handleFilter;return Object(c.jsxs)("div",{children:["filter by name",Object(c.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.person,t=e.drop;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("p",{children:[n.name," ",n.number,Object(c.jsx)("button",{onClick:t,children:"delete"})]})})},l=function(e){var n=e.text,t=e.value,r=e.onChange;return Object(c.jsxs)("div",{children:[n,":",Object(c.jsx)("input",{value:t,onChange:r})]})},b=function(e){var n=e.onSubmit,t=e.nameValue,r=e.numberValue,a=e.changeHandlers;return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsx)(l,{text:"name",value:t,onChange:a.name}),Object(c.jsx)(l,{text:"number",value:r,onChange:a.number}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){var n=e.message,t=e.error,r={marginBottom:25,maxWidth:"60%",background:t?"#FF8383":"#AEE0A1",border:t?"solid #FFAFAF":"solid #D1EEC9",borderRadius:5,borderWidth:2,paddingLeft:"0.5em",fontSize:17};return null===n?null:Object(c.jsx)("div",{style:r,children:Object(c.jsx)("p",{children:n})})},f=t(4),h=t.n(f),m="/api/persons",O=function(){return h.a.get(m).then((function(e){return e.data}))},x=function(e){return h.a.post(m,e).then((function(e){return e.data}))},p=function(e,n){return h.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(){return!0}))},g=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)(""),i=Object(o.a)(u,2),l=i[0],f=i[1],h=Object(r.useState)(""),m=Object(o.a)(h,2),g=m[0],S=m[1],w=Object(r.useState)(""),C=Object(o.a)(w,2),F=C[0],k=C[1],y=Object(r.useState)(!0),E=Object(o.a)(y,2),A=E[0],V=E[1],D=Object(r.useState)(null),L=Object(o.a)(D,2),B=L[0],H=L[1],J=Object(r.useState)(!1),P=Object(o.a)(J,2),W=P[0],z=P[1];Object(r.useEffect)((function(){O().then((function(e){a(e)}))}),[]);var I=A?t:t.filter((function(e){return e.name.toLowerCase().includes(F.toLowerCase())})),M=function(e){H(e),setTimeout((function(){H(null),z(!1)}),5e3)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(j,{message:B,error:W}),Object(c.jsx)(d,{filterString:F,handleFilter:function(e){k(e.target.value),""===e.target.value?V(!0):V(!1)}}),Object(c.jsx)("h2",{children:"Add new person"}),Object(c.jsx)(b,{onSubmit:function(e){if(e.preventDefault(),l&&g){var n=t.find((function(e){return e.name===l}));if(n){if(window.confirm("".concat(n.name," is already added to phonebook. replace the old number with this one?"))){var c={name:n.name,number:g};!function(e,n){p(e,n).then((function(n){a(t.map((function(t){return t.id!==e?t:n})))})).catch((function(e){z(!0),M("".concat(n.name," was already deleted"))})),a(t.filter((function(n){return n.id!==e}))),M("Successfully updated contact"),f(""),S("")}(n.id,c)}}else x({name:l,number:g}).then((function(e){a(t.concat(e))})),M("Successfully added contact"),f(""),S("")}else window.alert("Please fill in name and number")},nameValue:l,numberValue:g,changeHandlers:{name:function(e){f(e.target.value)},number:function(e){S(e.target.value)}}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("div",{children:I.map((function(e){return Object(c.jsx)(s,{person:e,drop:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&(v(e.id),a(t.filter((function(n){return n.id!==e.id}))))}(e)}},e.id)}))})]})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.833d21bc.chunk.js.map